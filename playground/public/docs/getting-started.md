# è¡¨è¾¾å¼å…¥é—¨æŒ‡å—

æ¬¢è¿æ¥åˆ°è¡¨è¾¾å¼çš„ä¸–ç•Œï¼è¿™ä¸ªæŒ‡å—å°†åœ¨5åˆ†é’Ÿå†…è®©ä½ æŒæ¡è¡¨è¾¾å¼çš„åŸºç¡€çŸ¥è¯†ï¼Œè®©ä½ çš„workflowå˜å¾—æ›´åŠ æ™ºèƒ½å’Œå¼ºå¤§ã€‚

## ğŸ¤” ä»€ä¹ˆæ˜¯è¡¨è¾¾å¼ï¼Ÿ

è¡¨è¾¾å¼æ˜¯ä¸€ç§ç‰¹æ®Šçš„ä»£ç ç‰‡æ®µï¼Œå¯ä»¥è®©ä½ åœ¨workflowä¸­è¿›è¡ŒåŠ¨æ€çš„æ•°æ®å¤„ç†ã€è®¡ç®—å’Œé€»è¾‘åˆ¤æ–­ã€‚

### ç®€å•æ¥è¯´

- **é™æ€æ–‡æœ¬**: `Hello World` - æ€»æ˜¯è¾“å‡º "Hello World"
- **è¡¨è¾¾å¼**: `Hello {{ $json.name }}` - æ ¹æ®æ•°æ®åŠ¨æ€è¾“å‡ºï¼Œæ¯”å¦‚ "Hello Alice"

### è¡¨è¾¾å¼çš„åŠ›é‡

```
è¾“å…¥æ•°æ®: { "name": "å¼ ä¸‰", "age": 25, "city": "åŒ—äº¬" }

é™æ€æ–‡æœ¬: "ç”¨æˆ·ä¿¡æ¯"
è¡¨è¾¾å¼: "ç”¨æˆ· {{ $json.name }} ä»Šå¹´ {{ $json.age }} å²ï¼Œæ¥è‡ª {{ $json.city }}"
è¾“å‡º: "ç”¨æˆ· å¼ ä¸‰ ä»Šå¹´ 25 å²ï¼Œæ¥è‡ª åŒ—äº¬"
```

## ğŸ¯ è¡¨è¾¾å¼çš„åŸºæœ¬ç»“æ„

### åŒèŠ±æ‹¬å·è¯­æ³•

è¡¨è¾¾å¼å¿…é¡»åŒ…å«åœ¨åŒèŠ±æ‹¬å· `{{ }}` ä¸­ï¼š

```javascript
{
  {
    è¡¨è¾¾å¼å†…å®¹
  }
}
```

### ä¸‰ç§åŸºæœ¬ç±»å‹

#### 1. ğŸ”¢ æ•°å€¼è®¡ç®—

```javascript
{
  {
    1 + 1
  }
} // è¾“å‡º: 2
{
  {
    $json.price * 0.9
  }
} // æ‰“9æŠ˜
{
  {
    $json.quantity * $json.unitPrice
  }
} // è®¡ç®—æ€»ä»·
```

#### 2. ğŸ“ æ–‡æœ¬å¤„ç†

```javascript
{
  {
    "Hello " + $json.name
  }
} // å­—ç¬¦ä¸²æ‹¼æ¥
{
  {
    $json.message.toUpperCase()
  }
} // è½¬å¤§å†™
{
  {
    $json.description.length
  }
} // è·å–æ–‡æœ¬é•¿åº¦
```

#### 3. ğŸ§  é€»è¾‘åˆ¤æ–­

```javascript
{
  {
    $json.age >= 18
  }
} // è¾“å‡º: true æˆ– false
{
  {
    $json.status === "active"
  }
} // åˆ¤æ–­çŠ¶æ€
{
  {
    $json.score > 60 ? "åŠæ ¼" : "ä¸åŠæ ¼"
  }
} // æ¡ä»¶è¡¨è¾¾å¼
```

## ğŸ—‚ è®¤è¯†å†…ç½®å˜é‡

åœ¨workflowä¸­ï¼Œä½ å¯ä»¥è®¿é—®è¿™äº›é¢„å®šä¹‰çš„å˜é‡ï¼š

### ğŸ“‹ `$json` - å½“å‰èŠ‚ç‚¹çš„æ•°æ®

```javascript
// å‡è®¾å½“å‰æ•°æ®æ˜¯: { "user": { "name": "æå››", "email": "lisi@example.com" } }

{
  {
    $json.user.name
  }
} // è¾“å‡º: "æå››"
{
  {
    $json.user.email
  }
} // è¾“å‡º: "lisi@example.com"
```

### ğŸ”§ `$vars` - å·¥ä½œæµå˜é‡

```javascript
// åœ¨workflowä¸­è®¾ç½®çš„å˜é‡

{
  {
    $vars.apiKey
  }
} // è·å–APIå¯†é’¥
{
  {
    $vars.baseUrl
  }
} // è·å–åŸºç¡€URL
{
  {
    $vars.retryCount
  }
} // è·å–é‡è¯•æ¬¡æ•°
```

### ğŸ“„ `$node` - èŠ‚ç‚¹ä¿¡æ¯

```javascript
{
  {
    $node.name
  }
} // å½“å‰èŠ‚ç‚¹åç§°
{
  {
    $node.type
  }
} // èŠ‚ç‚¹ç±»å‹
```

### â° `$now` - å½“å‰æ—¶é—´

```javascript
{
  {
    $now.toFormat("yyyy-MM-dd")
  }
} // è¾“å‡º: "2024-01-15"
{
  {
    $now.toFormat("HH:mm:ss")
  }
} // è¾“å‡º: "14:30:25"
{
  {
    $now.weekday
  }
} // è¾“å‡º: 1-7 (å‘¨ä¸€åˆ°å‘¨æ—¥)
```

## ğŸŒŸ ç¬¬ä¸€ä¸ªå®ç”¨è¡¨è¾¾å¼

è®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªå®é™…çš„ä¾‹å­ï¼š

### åœºæ™¯ï¼šç”¨æˆ·æ³¨å†Œæ¬¢è¿é‚®ä»¶

**è¾“å…¥æ•°æ®:**

```json
{
  "user": {
    "name": "ç‹å°æ˜",
    "email": "wangxiaoming@example.com",
    "registrationDate": "2024-01-15T10:30:00Z"
  }
}
```

**è¡¨è¾¾å¼:**

```javascript
äº²çˆ±çš„ {{ $json.user.name }}ï¼Œ

æ¬¢è¿åŠ å…¥æˆ‘ä»¬ï¼æ‚¨çš„è´¦æˆ· {{ $json.user.email }} å·²äº {{ $now.toFormat("yyyyå¹´MMæœˆddæ—¥") }} æˆåŠŸæ³¨å†Œã€‚

æ„Ÿè°¢æ‚¨çš„ä¿¡ä»»ï¼
```

**è¾“å‡º:**

```
äº²çˆ±çš„ ç‹å°æ˜ï¼Œ

æ¬¢è¿åŠ å…¥æˆ‘ä»¬ï¼æ‚¨çš„è´¦æˆ· wangxiaoming@example.com å·²äº 2024å¹´01æœˆ15æ—¥ æˆåŠŸæ³¨å†Œã€‚

æ„Ÿè°¢æ‚¨çš„ä¿¡ä»»ï¼
```

## ğŸ® åŠ¨æ‰‹ç»ƒä¹ 

è¯•è¯•è¿™äº›ç»ƒä¹ ï¼š

### ç»ƒä¹ 1ï¼šåŸºç¡€è®¡ç®—

**æ•°æ®**: `{ "items": [{"price": 100}, {"price": 200}, {"price": 50}] }`

**ç›®æ ‡**: è®¡ç®—å•†å“æ€»ä»·

<details>
<summary>ğŸ’¡ ç‚¹å‡»æŸ¥çœ‹ç­”æ¡ˆ</summary>

```javascript
{
  {
    $json.items[0].price + $json.items[1].price + $json.items[2].price
  }
}
// æˆ–è€…ä½¿ç”¨æ›´ç®€æ´çš„æ–¹å¼ï¼ˆåé¢ä¼šå­¦åˆ°ï¼‰:
{
  {
    $json.items.reduce((sum, item) => sum + item.price, 0)
  }
}
```

</details>

### ç»ƒä¹ 2ï¼šæ¡ä»¶åˆ¤æ–­

**æ•°æ®**: `{ "user": { "age": 25, "membership": "premium" } }`

**ç›®æ ‡**: åˆ¤æ–­ç”¨æˆ·æ˜¯å¦å¯ä»¥äº«å—é«˜çº§åŠŸèƒ½ï¼ˆå¹´é¾„>=18ä¸”æ˜¯premiumä¼šå‘˜ï¼‰

<details>
<summary>ğŸ’¡ ç‚¹å‡»æŸ¥çœ‹ç­”æ¡ˆ</summary>

```javascript
{
  {
    $json.user.age >= 18 && $json.user.membership === "premium"
  }
}
// è¾“å‡º: true
```

</details>

### ç»ƒä¹ 3ï¼šæ–‡æœ¬å¤„ç†

**æ•°æ®**: `{ "user": { "firstName": "å°æ˜", "lastName": "ç‹" } }`

**ç›®æ ‡**: ç”Ÿæˆå®Œæ•´å§“å

<details>
<summary>ğŸ’¡ ç‚¹å‡»æŸ¥çœ‹ç­”æ¡ˆ</summary>

```javascript
{
  {
    $json.user.lastName + $json.user.firstName
  }
}
// è¾“å‡º: "ç‹å°æ˜"
```

</details>

## ğŸš€ å¸¸è§ä½¿ç”¨åœºæ™¯

### ğŸ“§ é‚®ä»¶å†…å®¹ç”Ÿæˆ

```javascript
ä¸»é¢˜: {{ $json.orderType === "urgent" ? "ã€ç´§æ€¥ã€‘" : "" }}è®¢å• #{{ $json.orderId }} å·²ç¡®è®¤

æ‚¨å¥½ {{ $json.customer.name }}ï¼Œ
æ‚¨çš„è®¢å•æ€»é‡‘é¢ä¸º Â¥{{ $json.totalAmount }}ï¼Œé¢„è®¡ {{ $json.estimatedDelivery }} é€è¾¾ã€‚
```

### ğŸ”— APIè¯·æ±‚URLæ„å»º

```javascript
{{ $vars.baseUrl }}/api/users/{{ $json.userId }}/orders?status={{ $json.filterStatus }}
```

### ğŸ“Š æ•°æ®éªŒè¯

```javascript
{
  {
    $json.email.includes("@") && $json.email.includes(".")
  }
} // ç®€å•é‚®ç®±éªŒè¯
{
  {
    $json.phone.length === 11
  }
} // æ‰‹æœºå·é•¿åº¦éªŒè¯
{
  {
    $json.age >= 0 && $json.age <= 120
  }
} // å¹´é¾„èŒƒå›´éªŒè¯
```

### ğŸ· æ ‡ç­¾ç”Ÿæˆ

```javascript
{
  {
    $json.score >= 90 ? "ä¼˜ç§€" : $json.score >= 60 ? "åˆæ ¼" : "éœ€æ”¹è¿›"
  }
}
```

## âš ï¸ åˆå­¦è€…å¸¸è§é”™è¯¯

### 1. å¿˜è®°åŒèŠ±æ‹¬å·

```javascript
âŒ $json.name           // è¿™ä¼šè¢«å½“ä½œæ™®é€šæ–‡æœ¬
âœ… {{ $json.name }}     // æ­£ç¡®çš„è¡¨è¾¾å¼
```

### 2. è®¿é—®ä¸å­˜åœ¨çš„å±æ€§

```javascript
âŒ {{ $json.user.nonExistentField }}  // å¯èƒ½æŠ¥é”™
âœ… {{ $json.user.nonExistentField ?? "é»˜è®¤å€¼" }}  // å®‰å…¨è®¿é—®
```

### 3. å­—ç¬¦ä¸²æ‹¼æ¥é”™è¯¯

```javascript
âŒ {{ "Hello " $json.name }}           // è¯­æ³•é”™è¯¯
âœ… {{ "Hello " + $json.name }}         // æ­£ç¡®æ‹¼æ¥
```

### 4. æ•°æ®ç±»å‹æ··æ·†

```javascript
âŒ {{ $json.stringNumber + 1 }}        // "10" + 1 = "101" (å­—ç¬¦ä¸²æ‹¼æ¥)
âœ… {{ Number($json.stringNumber) + 1 }} // Number("10") + 1 = 11 (æ•°å€¼è®¡ç®—)
```

## ğŸ¯ ä¸‹ä¸€æ­¥å­¦ä¹ 

æŒæ¡äº†åŸºç¡€çŸ¥è¯†åï¼Œå»ºè®®æŒ‰ä»¥ä¸‹é¡ºåºç»§ç»­å­¦ä¹ ï¼š

1. **[åŸºç¡€è¯­æ³•](./syntax-basics.md)** - å­¦ä¹ æ›´è¯¦ç»†çš„è¯­æ³•è§„åˆ™
2. **[å¸¸ç”¨ç¤ºä¾‹](./common-examples.md)** - çœ‹æ›´å¤šå®ç”¨æ¡ˆä¾‹
3. **[å˜é‡ä½¿ç”¨æŒ‡å—](./variables-guide.md)** - æ·±å…¥äº†è§£æ‰€æœ‰å†…ç½®å˜é‡
4. **[å‡½æ•°åº“å‚è€ƒ](./functions-reference.md)** - æŒæ¡å¼ºå¤§çš„å†…ç½®å‡½æ•°

## ğŸ’¡ å°è´´å£«

- **å®æ—¶é¢„è§ˆ**: workflowç¼–è¾‘å™¨ä¸­å¯ä»¥å®æ—¶çœ‹åˆ°è¡¨è¾¾å¼ç»“æœ
- **é”™è¯¯æç¤º**: å¦‚æœè¡¨è¾¾å¼æœ‰é”™è¯¯ï¼Œç¼–è¾‘å™¨ä¼šæ˜¾ç¤ºè¯¦ç»†çš„é”™è¯¯ä¿¡æ¯
- **è‡ªåŠ¨è¡¥å…¨**: è¾“å…¥ `$` ä¼šè‡ªåŠ¨æç¤ºå¯ç”¨çš„å˜é‡å’Œå‡½æ•°
- **è°ƒè¯•æŠ€å·§**: ä½¿ç”¨ `{{ JSON.stringify($json) }}` æŸ¥çœ‹å®Œæ•´æ•°æ®ç»“æ„

---

ğŸ‰ **æ­å–œï¼ä½ å·²ç»æŒæ¡äº†è¡¨è¾¾å¼çš„åŸºç¡€çŸ¥è¯†ï¼** ç°åœ¨ä½ å¯ä»¥åœ¨workflowä¸­åˆ›å»ºåŠ¨æ€ã€æ™ºèƒ½çš„æ•°æ®å¤„ç†é€»è¾‘äº†ã€‚
